var _0x3790=['log','fcc:boot:auth\x20-\x20Sign\x20up\x20is\x20disabled','exports','Router','LOCAL_MOCK_AUTH','get','/signin','devlogin','authenticate','auth0-login','/auth/auth0/callback','auth0','/signout','logout','session','destroy','info','redirect','use','env'];(function(_0x2ed248,_0x3361b1){var _0x27b87e=function(_0x300ddf){while(--_0x300ddf){_0x2ed248['push'](_0x2ed248['shift']());}};_0x27b87e(++_0x3361b1);}(_0x3790,0x18f));var _0xb67a=function(_0x2a34e1,_0x27826a){_0x2a34e1=_0x2a34e1-0x0;var _0x5cd7a8=_0x3790[_0x2a34e1];return _0x5cd7a8;};import _0x5854f9 from'passport';import{homeLocation}from'../../../config/env';import{createPassportCallbackAuthenticator,saveResponseAuthCookies,loginRedirect}from'../component-passport';import{ifUserRedirectTo}from'../utils/middleware';import{wrapHandledError}from'../utils/create-handled-error.js';import{removeCookies}from'../utils/getSetAccessToken';const isSignUpDisabled=!!process[_0xb67a('0x0')]['DISABLE_SIGNUP'];if(isSignUpDisabled){console[_0xb67a('0x1')](_0xb67a('0x2'));}module[_0xb67a('0x3')]=function enableAuthentication(app){app['enableAuth']();const ifUserRedirect=ifUserRedirectTo();const saveAuthCookies=saveResponseAuthCookies();const loginSuccessRedirect=loginRedirect();const api=app['loopback'][_0xb67a('0x4')]();if(process[_0xb67a('0x0')][_0xb67a('0x5')]==='true'){api[_0xb67a('0x6')](_0xb67a('0x7'),_0x5854f9['authenticate'](_0xb67a('0x8')),saveAuthCookies,loginSuccessRedirect);}else{api['get'](_0xb67a('0x7'),ifUserRedirect,_0x5854f9[_0xb67a('0x9')](_0xb67a('0xa'),{}));api['get'](_0xb67a('0xb'),createPassportCallbackAuthenticator(_0xb67a('0xa'),{'provider':_0xb67a('0xc')}));}api[_0xb67a('0x6')](_0xb67a('0xd'),(req,res)=>{req[_0xb67a('0xe')]();req[_0xb67a('0xf')][_0xb67a('0x10')](err=>{if(err){throw wrapHandledError(new Error('could\x20not\x20destroy\x20session'),{'type':_0xb67a('0x11'),'message':'Oops,\x20something\x20is\x20not\x20right.','redirectTo':homeLocation});}removeCookies(req,res);res[_0xb67a('0x12')](homeLocation);});});app[_0xb67a('0x13')](api);};