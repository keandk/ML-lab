var _0x3c40=['close','assert','http','child_process','../common.js','../../test/common','../../test/common/tmpdir','PIPE_NAME','createServer','text/plain','writeHead','error','server\x20error:\x20','listen','slice','message'];(function(_0x395f88,_0x1bbccd){var _0x1d51af=function(_0x18b029){while(--_0x18b029){_0x395f88['push'](_0x395f88['shift']());}};_0x1d51af(++_0x1bbccd);}(_0x3c40,0x151));var _0x5afa=function(_0x49e4ce,_0x1a2357){_0x49e4ce=_0x49e4ce-0x0;var _0x124c4e=_0x3c40[_0x49e4ce];return _0x124c4e;};'use strict';const assert=require(_0x5afa('0x0'));const http=require(_0x5afa('0x1'));const {fork}=require(_0x5afa('0x2'));const common=require(_0x5afa('0x3'));const {PIPE}=require(_0x5afa('0x4'));const tmpdir=require(_0x5afa('0x5'));process['env'][_0x5afa('0x6')]=PIPE;tmpdir['refresh']();var server;server=http[_0x5afa('0x7')]((_0x34968f,_0x2ad266)=>{const _0x3d8a54={'content-type':_0x5afa('0x8'),'content-length':'2'};_0x2ad266[_0x5afa('0x9')](0xc8,_0x3d8a54);_0x2ad266['end']('ok');});server['on'](_0x5afa('0xa'),_0x488c40=>{throw new Error(_0x5afa('0xb')+_0x488c40);});server[_0x5afa('0xc')](PIPE);const child=fork(__dirname+'/_chunky_http_client.js',process['argv'][_0x5afa('0xd')](0x2));child['on'](_0x5afa('0xe'),common['sendResult']);child['on'](_0x5afa('0xf'),_0x2aa19c=>{server[_0x5afa('0xf')]();assert['strictEqual'](_0x2aa19c,0x0);});