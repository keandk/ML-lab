var _0x2192=['writeFileSync','pathMigration\x20has\x20been\x20written','catch','exit','pathMigration\x20present','/config/env.json','stringify','/env.json','path','../../config/env','./seed/createPathMigrationMap','./createRedirects','fcc:tools:ensure-env','env','resolve','../../client','static','writeFile','error','_redirects\x20written','ignoring\x20creation\x20of\x20redirect\x20file\x20in\x20','production','then'];(function(_0xb6a691,_0x30cf4f){var _0x10c857=function(_0x3219d2){while(--_0x3219d2){_0xb6a691['push'](_0xb6a691['shift']());}};_0x10c857(++_0x30cf4f);}(_0x2192,0x7b));var _0x3e59=function(_0x139747,_0x55d05a){_0x139747=_0x139747-0x0;var _0x3b0247=_0x2192[_0x139747];return _0x3b0247;};const fs=require('fs');const path=require(_0x3e59('0x0'));const debug=require('debug');const env=require(_0x3e59('0x1'));const {getChallengesForLang}=require('../../curriculum/getChallenges');const {createPathMigrationMap}=require(_0x3e59('0x2'));const {createRedirects}=require(_0x3e59('0x3'));const log=debug(_0x3e59('0x4'));const {NODE_ENV}=process[_0x3e59('0x5')];const {apiLocation:api,forumLocation:forum,locale,newsLocation:news}=env;const apiPath=path['resolve'](__dirname,'../../api-server');const clientPath=path[_0x3e59('0x6')](__dirname,_0x3e59('0x7'));const clientStaticPath=path[_0x3e59('0x6')](clientPath,_0x3e59('0x8'));const globalConfigPath=path['resolve'](__dirname,'../../config');if(NODE_ENV==='production'){const redirects=createRedirects({'api':api,'news':news,'forum':forum});fs[_0x3e59('0x9')](clientStaticPath+'/_redirects',redirects,function(_0x153b9c){if(_0x153b9c){log('Error');console[_0x3e59('0xa')](_0x153b9c);}log(_0x3e59('0xb'));});}else{log(_0x3e59('0xc')+NODE_ENV);}const migrationMapPath=apiPath+'/server/resources/pathMigration.json';fs['access'](migrationMapPath,_0x37bf6c=>{if(_0x37bf6c&&NODE_ENV!=='production'){log('creating\x20pathMigration');return fs['writeFileSync'](migrationMapPath,'{}');}if(NODE_ENV===_0x3e59('0xd')){return getChallengesForLang(locale)[_0x3e59('0xe')](createPathMigrationMap)['then'](_0x2594b4=>{fs[_0x3e59('0xf')](migrationMapPath,JSON['stringify'](_0x2594b4));log(_0x3e59('0x10'));})[_0x3e59('0x11')](_0x37bf6c=>{console[_0x3e59('0xa')](_0x37bf6c);process[_0x3e59('0x12')](0x1);});}log(_0x3e59('0x13'));return null;});fs[_0x3e59('0xf')](clientPath+_0x3e59('0x14'),JSON[_0x3e59('0x15')](env));fs[_0x3e59('0xf')](globalConfigPath+_0x3e59('0x16'),JSON[_0x3e59('0x15')](env));