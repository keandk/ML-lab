var _0x2fc7=['scriptURL','mainScriptId','_notificationCallback','_sendMessage','_nextId','isArray','map','then','waitForNotification','Timed\x20out\x20waiting\x20for\x20matching\x20notification\x20(','_asyncWaitForNotification','string','shift','_isBreakOnLineNotification','method','Debugger.paused','params','location','scriptId','\x20!==\x20','break\x20on\x20','_matchesConsoleOutputNotification','Runtime.consoleAPICalled','args','value','waitForConsoleOutput','Console\x20output\x20matching\x20','runToCompletion','send','Runtime.executionContextDestroyed','executionContextId','_instance','nextStderrString','Waiting\x20for\x20the\x20debugger\x20to\x20disconnect...','script','--expose-internals','_scriptPath','_script','_portCallback','portPromise','_process','_running','_stderrLineCallback','stdout','emit','stderr','startViaSignal','\x0aprocess._rawDebug(\x27started\x27);','Timed\x20out\x20waiting\x20for\x20process\x20to\x20start','started','_debugProcess','onStderrLine','[err]','match','_unprocessedStderrLines','Testing\x20','setEncoding','end','body','httpGet','/json/list','webSocketDebuggerUrl','Upgrade','key==','connectInspectorSession','[test]','sendUpgradeRequest','upgrade','response','mustNotCall','Upgrade\x20was\x20not\x20received','expectConnectionDeclined','Checking\x20upgrade\x20is\x20not\x20possible','Upgrade\x20was\x20received','statusCode','expectShutdown','_shutdownPromise','resolve','stdin','scriptPath','clear','race','exports','../common','assert','http','../common/fixtures','child_process','url','internal/url','path','platformTimeout','concat','push','execPath','bind','exit','uncaughtException','alloc','toString','utf8','replace','split','endsWith','from','pop','kill','error','length','strictEqual','readUInt16BE','Inspector\x20message\x20too\x20big','readUIntBE','slice','parse','JSON.parse()\x20failed\x20for:\x20','log','stringify','allocUnsafe','writeUInt8','writeUInt32BE','_commandResponsePromises','_unprocessedNotifications','_scriptsIdsByUrl','data','write','_onMessage','_terminationPromise','once','disconnect','_socket','waitForServerDisconnect','get','result','Debugger.scriptParsed','set'];(function(_0x4e83bd,_0x227207){var _0x2d3a8d=function(_0xa809f5){while(--_0xa809f5){_0x4e83bd['push'](_0x4e83bd['shift']());}};_0x2d3a8d(++_0x227207);}(_0x2fc7,0xdb));var _0x1747=function(_0x9235d9,_0x2e915c){_0x9235d9=_0x9235d9-0x0;var _0x16396f=_0x2fc7[_0x9235d9];return _0x16396f;};'use strict';const common=require(_0x1747('0x0'));const assert=require(_0x1747('0x1'));const fs=require('fs');const http=require(_0x1747('0x2'));const fixtures=require(_0x1747('0x3'));const {spawn}=require(_0x1747('0x4'));const {parse:parseURL}=require(_0x1747('0x5'));const {pathToFileURL}=require(_0x1747('0x6'));const {EventEmitter}=require('events');const _MAINSCRIPT=fixtures[_0x1747('0x7')]('loop.js');const DEBUG=![];const TIMEOUT=common[_0x1747('0x8')](0xf*0x3e8);function spawnChildProcess(_0xd0641b,_0x47bc6f,_0x363196){const _0xcddff8=[][_0x1747('0x9')](_0xd0641b);if(_0x47bc6f){_0xcddff8[_0x1747('0xa')]('-e',_0x47bc6f);}else{_0xcddff8[_0x1747('0xa')](_0x363196);}const _0x49e616=spawn(process[_0x1747('0xb')],_0xcddff8);const _0x27a641=tearDown[_0x1747('0xc')](null,_0x49e616);process['on'](_0x1747('0xd'),_0x27a641);process['on'](_0x1747('0xe'),_0x27a641);common['disableCrashOnUnhandledRejection']();process['on']('unhandledRejection',_0x27a641);process['on']('SIGINT',_0x27a641);return _0x49e616;}function makeBufferingDataCallback(_0x29eb0a){let _0xd4b28=Buffer[_0x1747('0xf')](0x0);return _0x420dcb=>{const _0x56fb9c=Buffer[_0x1747('0x9')]([_0xd4b28,_0x420dcb]);const _0x473f36=_0x56fb9c[_0x1747('0x10')](_0x1747('0x11'));const _0x468b3e=_0x473f36[_0x1747('0x12')](/\r/g,'')[_0x1747('0x13')]('\x0a');if(_0x473f36[_0x1747('0x14')]('\x0a'))_0xd4b28=Buffer[_0x1747('0xf')](0x0);else _0xd4b28=Buffer[_0x1747('0x15')](_0x468b3e[_0x1747('0x16')](),'utf8');for(const _0x18e2fc of _0x468b3e)_0x29eb0a(_0x18e2fc);};}function tearDown(_0x25b9a7,_0xb86407){_0x25b9a7[_0x1747('0x17')]();if(_0xb86407){console[_0x1747('0x18')](_0xb86407);process[_0x1747('0xd')](0x1);}}function parseWSFrame(_0x3007b7){let _0x5232ad=null;if(_0x3007b7[_0x1747('0x19')]<0x2)return{'length':0x0,'message':_0x5232ad};if(_0x3007b7[0x0]===0x88&&_0x3007b7[0x1]===0x0){return{'length':0x2,'message':_0x5232ad,'closed':!![]};}assert[_0x1747('0x1a')](_0x3007b7[0x0],0x81);let _0x2fca98=0x7f&_0x3007b7[0x1];let _0x592722=0x2;if(_0x3007b7[_0x1747('0x19')]<_0x592722+_0x2fca98)return 0x0;if(_0x2fca98===0x7e){_0x2fca98=_0x3007b7[_0x1747('0x1b')](0x2);_0x592722=0x4;}else if(_0x2fca98===0x7f){assert(_0x3007b7[0x2]===0x0&&_0x3007b7[0x3]===0x0,_0x1747('0x1c'));_0x2fca98=_0x3007b7[_0x1747('0x1d')](0x4,0x6);_0x592722=0xa;}if(_0x3007b7[_0x1747('0x19')]<_0x592722+_0x2fca98)return{'length':0x0,'message':_0x5232ad};const _0x400268=_0x3007b7[_0x1747('0x1e')](_0x592722,_0x592722+_0x2fca98)[_0x1747('0x10')](_0x1747('0x11'));try{_0x5232ad=JSON[_0x1747('0x1f')](_0x400268);}catch(_0x4e0cab){console['error'](_0x1747('0x20')+_0x400268);throw _0x4e0cab;}if(DEBUG)console[_0x1747('0x21')]('[received]',JSON['stringify'](_0x5232ad));return{'length':_0x592722+_0x2fca98,'message':_0x5232ad};}function formatWSFrame(_0x557a13){const _0x5759df=Buffer[_0x1747('0x15')](JSON[_0x1747('0x22')](_0x557a13));const _0xffb69b=Buffer[_0x1747('0x23')](0x10);_0xffb69b[_0x1747('0x24')](0x81,0x0);let _0x2837d7=0x80;const _0x292154=_0x5759df[_0x1747('0x19')];let _0x5c814c=0x2;if(_0x292154<0x7e){_0x2837d7=0x80+_0x292154;}else if(_0x292154<0x10000){_0x2837d7=0xfe;_0xffb69b['writeUInt16BE'](_0x292154,0x2);_0x5c814c=0x4;}else{_0x2837d7=0xff;_0xffb69b[_0x1747('0x25')](_0x292154,0x2);_0xffb69b[_0x1747('0x25')](0x0,0x6);_0x5c814c=0xa;}_0xffb69b[_0x1747('0x24')](_0x2837d7,0x1);_0xffb69b[_0x1747('0x25')](0x1020408,_0x5c814c);for(let _0x3bda08=0x0;_0x3bda08<_0x5759df[_0x1747('0x19')];_0x3bda08++)_0x5759df[_0x3bda08]=_0x5759df[_0x3bda08]^0x1<<_0x3bda08%0x4;return Buffer['concat']([_0xffb69b[_0x1747('0x1e')](0x0,_0x5c814c+0x4),_0x5759df]);}class InspectorSession{constructor(_0x3ab578,_0x211d4b){this['_instance']=_0x211d4b;this['_socket']=_0x3ab578;this['_nextId']=0x1;this[_0x1747('0x26')]=new Map();this[_0x1747('0x27')]=[];this['_notificationCallback']=null;this[_0x1747('0x28')]=new Map();let _0x548d6e=Buffer[_0x1747('0xf')](0x0);_0x3ab578['on'](_0x1747('0x29'),_0xfdd14c=>{_0x548d6e=Buffer[_0x1747('0x9')]([_0x548d6e,_0xfdd14c]);do{const {length,message,closed}=parseWSFrame(_0x548d6e);if(!length)break;if(closed){_0x3ab578[_0x1747('0x2a')](Buffer[_0x1747('0x15')]([0x88,0x0]));}_0x548d6e=_0x548d6e['slice'](length);if(message)this[_0x1747('0x2b')](message);}while(!![]);});this[_0x1747('0x2c')]=new Promise(_0x5018b9=>{_0x3ab578[_0x1747('0x2d')]('close',_0x5018b9);});}['waitForServerDisconnect'](){return this['_terminationPromise'];}async[_0x1747('0x2e')](){this[_0x1747('0x2f')]['destroy']();return this[_0x1747('0x30')]();}[_0x1747('0x2b')](_0x55bac4){if(_0x55bac4['id']){const {resolve,reject}=this[_0x1747('0x26')][_0x1747('0x31')](_0x55bac4['id']);this[_0x1747('0x26')]['delete'](_0x55bac4['id']);if(_0x55bac4[_0x1747('0x32')])resolve(_0x55bac4[_0x1747('0x32')]);else reject(_0x55bac4[_0x1747('0x18')]);}else{if(_0x55bac4['method']===_0x1747('0x33')){const {scriptId,url}=_0x55bac4['params'];this[_0x1747('0x28')][_0x1747('0x34')](scriptId,url);const _0x5f1d75=url['startsWith']('file:')?url:pathToFileURL(url)[_0x1747('0x10')]();if(_0x5f1d75===this[_0x1747('0x35')]()[_0x1747('0x10')]()){this[_0x1747('0x36')]=scriptId;}}if(this['_notificationCallback']){const _0x38abfb=this[_0x1747('0x37')];this[_0x1747('0x37')]=null;_0x38abfb(_0x55bac4);}else{this[_0x1747('0x27')][_0x1747('0xa')](_0x55bac4);}}}[_0x1747('0x38')](_0x3be0ac){const _0x2fde58=JSON[_0x1747('0x1f')](JSON['stringify'](_0x3be0ac));_0x2fde58['id']=this[_0x1747('0x39')]++;if(DEBUG)console[_0x1747('0x21')]('[sent]',JSON['stringify'](_0x2fde58));const _0x21df2a=new Promise((_0x348de9,_0x30e766)=>{this['_commandResponsePromises'][_0x1747('0x34')](_0x2fde58['id'],{'resolve':_0x348de9,'reject':_0x30e766});});return new Promise(_0x581c05=>this[_0x1747('0x2f')][_0x1747('0x2a')](formatWSFrame(_0x2fde58),_0x581c05))['then'](()=>_0x21df2a);}['send'](_0x5d64d3){if(Array[_0x1747('0x3a')](_0x5d64d3)){return Promise['all'](_0x5d64d3[_0x1747('0x3b')](_0x128da7=>this[_0x1747('0x38')](_0x128da7)))[_0x1747('0x3c')](()=>{});}else{return this[_0x1747('0x38')](_0x5d64d3);}}[_0x1747('0x3d')](_0x3cd996,_0x5f1048){const _0x52aef6=_0x5f1048||_0x3cd996;const _0x4a7eef=_0x1747('0x3e')+_0x52aef6+'))';return fires(this[_0x1747('0x3f')](_0x3cd996),_0x4a7eef,TIMEOUT);}async[_0x1747('0x3f')](_0x3fc889){function _0x5c0fd2(_0x39580f){return _0x39580f['method']===_0x3fc889;}const _0x352106=typeof _0x3fc889===_0x1747('0x40')?_0x5c0fd2:_0x3fc889;let _0xe2a200=null;do{if(this['_unprocessedNotifications'][_0x1747('0x19')]){_0xe2a200=this[_0x1747('0x27')][_0x1747('0x41')]();}else{_0xe2a200=await new Promise(_0x3b257b=>this[_0x1747('0x37')]=_0x3b257b);}}while(!_0x352106(_0xe2a200));return _0xe2a200;}[_0x1747('0x42')](_0x27116e,_0x19bf21,_0x2d5f0e){if(_0x27116e[_0x1747('0x43')]===_0x1747('0x44')){const _0x519f41=_0x27116e[_0x1747('0x45')]['callFrames'][0x0];const _0x5ce0f0=_0x519f41[_0x1747('0x46')];const _0x141caf=this[_0x1747('0x28')][_0x1747('0x31')](_0x5ce0f0[_0x1747('0x47')]);assert[_0x1747('0x1a')](_0x141caf[_0x1747('0x10')](),_0x2d5f0e[_0x1747('0x10')](),_0x141caf+_0x1747('0x48')+_0x2d5f0e);assert[_0x1747('0x1a')](_0x5ce0f0['lineNumber'],_0x19bf21);return!![];}}['waitForBreakOnLine'](_0x51f6ef,_0x524e0f){return this[_0x1747('0x3d')](_0x37c7db=>this[_0x1747('0x42')](_0x37c7db,_0x51f6ef,_0x524e0f),_0x1747('0x49')+_0x524e0f+':'+_0x51f6ef);}[_0x1747('0x4a')](_0x534d56,_0x280f4c,_0x1f9cbb){if(!Array[_0x1747('0x3a')](_0x1f9cbb))_0x1f9cbb=[_0x1f9cbb];if(_0x534d56[_0x1747('0x43')]===_0x1747('0x4b')){const _0x41d261=_0x534d56['params'];if(_0x41d261['type']===_0x280f4c){let _0x2a2188=0x0;for(const _0x393234 of _0x41d261[_0x1747('0x4c')]){if(_0x393234[_0x1747('0x4d')]!==_0x1f9cbb[_0x2a2188++])return![];}return _0x2a2188===_0x1f9cbb[_0x1747('0x19')];}}}[_0x1747('0x4e')](_0x5f5734,_0x166ebd){const _0x35a17a=_0x1747('0x4f')+JSON['stringify'](_0x166ebd);return this[_0x1747('0x3d')](_0x5225e0=>this[_0x1747('0x4a')](_0x5225e0,_0x5f5734,_0x166ebd),_0x35a17a);}async[_0x1747('0x50')](){console[_0x1747('0x21')]('[test]','Verify\x20node\x20waits\x20for\x20the\x20frontend\x20to\x20disconnect');await this[_0x1747('0x51')]({'method':'Debugger.resume'});await this[_0x1747('0x3d')](_0x67c6b4=>{return _0x67c6b4[_0x1747('0x43')]===_0x1747('0x52')&&_0x67c6b4[_0x1747('0x45')][_0x1747('0x53')]===0x1;});while((await this[_0x1747('0x54')][_0x1747('0x55')]())!==_0x1747('0x56'));await this['disconnect']();}['scriptPath'](){return this[_0x1747('0x54')]['scriptPath']();}[_0x1747('0x57')](){return this['_instance']['script']();}[_0x1747('0x35')](){return pathToFileURL(this['scriptPath']());}}class NodeInstance extends EventEmitter{constructor(_0x274973=['--inspect-brk=0',_0x1747('0x58')],_0x49093a='',_0x5f9cf7=_MAINSCRIPT){super();this[_0x1747('0x59')]=_0x5f9cf7;this[_0x1747('0x5a')]=_0x5f9cf7?null:_0x49093a;this[_0x1747('0x5b')]=null;this[_0x1747('0x5c')]=new Promise(_0x4eac53=>this[_0x1747('0x5b')]=_0x4eac53);this[_0x1747('0x5d')]=spawnChildProcess(_0x274973,_0x49093a,_0x5f9cf7);this[_0x1747('0x5e')]=!![];this[_0x1747('0x5f')]=null;this['_unprocessedStderrLines']=[];this[_0x1747('0x5d')][_0x1747('0x60')]['on'](_0x1747('0x29'),makeBufferingDataCallback(_0x1d95db=>{this[_0x1747('0x61')](_0x1747('0x60'),_0x1d95db);console[_0x1747('0x21')]('[out]',_0x1d95db);}));this['_process'][_0x1747('0x62')]['on'](_0x1747('0x29'),makeBufferingDataCallback(_0x47dca2=>this['onStderrLine'](_0x47dca2)));this['_shutdownPromise']=new Promise(_0x3c489b=>{this[_0x1747('0x5d')][_0x1747('0x2d')](_0x1747('0xd'),(_0x18c4db,_0x3bafc7)=>{_0x3c489b({'exitCode':_0x18c4db,'signal':_0x3bafc7});this[_0x1747('0x5e')]=![];});});}static async[_0x1747('0x63')](_0x17b7e8){const _0x54c25f=new NodeInstance([_0x1747('0x58')],_0x17b7e8+_0x1747('0x64'),undefined);const _0x21f450=_0x1747('0x65');while((await fires(_0x54c25f[_0x1747('0x55')](),_0x21f450,TIMEOUT))!==_0x1747('0x66')){}process[_0x1747('0x67')](_0x54c25f['_process']['pid']);return _0x54c25f;}[_0x1747('0x68')](_0x2d2200){console[_0x1747('0x21')](_0x1747('0x69'),_0x2d2200);if(this[_0x1747('0x5b')]){const _0x46d832=_0x2d2200[_0x1747('0x6a')](/Debugger listening on ws:\/\/.+:(\d+)\/.+/);if(_0x46d832){this[_0x1747('0x5b')](_0x46d832[0x1]);this[_0x1747('0x5b')]=null;}}if(this['_stderrLineCallback']){this[_0x1747('0x5f')](_0x2d2200);this['_stderrLineCallback']=null;}else{this[_0x1747('0x6b')][_0x1747('0xa')](_0x2d2200);}}['httpGet'](_0x1affc8,_0x305965,_0x4f2941){console[_0x1747('0x21')]('[test]',_0x1747('0x6c')+_0x305965);const _0x29fe3d=_0x4f2941?{'Host':_0x4f2941}:null;return this[_0x1747('0x5c')][_0x1747('0x3c')](_0x5bfd8e=>new Promise((_0x566995,_0x360f36)=>{const _0x3f9800=http[_0x1747('0x31')]({'host':_0x1affc8,'port':_0x5bfd8e,'path':_0x305965,'headers':_0x29fe3d},_0x2ce388=>{let _0x580884='';_0x2ce388[_0x1747('0x6d')]('utf8');_0x2ce388['on']('data',_0x1d9aed=>_0x580884+=_0x1d9aed[_0x1747('0x10')]())['on'](_0x1747('0x6e'),()=>{_0x566995(_0x580884);});});_0x3f9800['on'](_0x1747('0x18'),_0x360f36);}))[_0x1747('0x3c')](_0x2798f1=>{try{return JSON[_0x1747('0x1f')](_0x2798f1);}catch(_0x1fcb5d){_0x1fcb5d[_0x1747('0x6f')]=_0x2798f1;throw _0x1fcb5d;}});}async['sendUpgradeRequest'](){const _0x2c4d9b=await this[_0x1747('0x70')](null,_0x1747('0x71'));const _0x1d82f0=_0x2c4d9b[0x0][_0x1747('0x72')];const _0x4d9f60=await this['portPromise'];return http[_0x1747('0x31')]({'port':_0x4d9f60,'path':parseURL(_0x1d82f0)[_0x1747('0x7')],'headers':{'Connection':_0x1747('0x73'),'Upgrade':'websocket','Sec-WebSocket-Version':0xd,'Sec-WebSocket-Key':_0x1747('0x74')}});}async[_0x1747('0x75')](){console['log'](_0x1747('0x76'),'Connecting\x20to\x20a\x20child\x20Node\x20process');const _0x2b3a25=await this[_0x1747('0x77')]();return new Promise(_0x3d538b=>{_0x2b3a25['on'](_0x1747('0x78'),(_0x12d617,_0x5658f1)=>_0x3d538b(new InspectorSession(_0x5658f1,this)))['on'](_0x1747('0x79'),common[_0x1747('0x7a')](_0x1747('0x7b')));});}async[_0x1747('0x7c')](){console['log'](_0x1747('0x76'),_0x1747('0x7d'));const _0x47fb5e=await this[_0x1747('0x77')]();return new Promise(_0x293dc3=>{_0x47fb5e['on'](_0x1747('0x78'),common[_0x1747('0x7a')](_0x1747('0x7e')))['on'](_0x1747('0x79'),_0x22378e=>_0x22378e['on'](_0x1747('0x29'),()=>{})['on'](_0x1747('0x6e'),()=>_0x293dc3(_0x22378e[_0x1747('0x7f')])));});}[_0x1747('0x80')](){return this[_0x1747('0x81')];}[_0x1747('0x55')](){if(this[_0x1747('0x6b')][_0x1747('0x19')])return Promise[_0x1747('0x82')](this['_unprocessedStderrLines'][_0x1747('0x41')]());return new Promise(_0x4be950=>this[_0x1747('0x5f')]=_0x4be950);}[_0x1747('0x2a')](_0xda0ae8){this[_0x1747('0x5d')][_0x1747('0x83')]['write'](_0xda0ae8);}['kill'](){this['_process'][_0x1747('0x17')]();return this[_0x1747('0x80')]();}[_0x1747('0x84')](){return this[_0x1747('0x59')];}[_0x1747('0x57')](){if(this[_0x1747('0x5a')]===null)this[_0x1747('0x5a')]=fs['readFileSync'](this['scriptPath'](),_0x1747('0x11'));return this[_0x1747('0x5a')];}}function onResolvedOrRejected(_0x1f52d8,_0x3e6574){return _0x1f52d8[_0x1747('0x3c')](_0x532c3b=>{_0x3e6574();return _0x532c3b;},_0x778fbe=>{_0x3e6574();throw _0x778fbe;});}function timeoutPromise(_0x5805f6,_0x29cd1e){let _0x5c595f=null;let _0x150cf4=![];const _0x440ec9=onResolvedOrRejected(new Promise((_0x94338,_0x56466a)=>{const _0x142f10=setTimeout(()=>_0x56466a(_0x5805f6),_0x29cd1e);_0x5c595f=()=>{if(_0x150cf4)return;clearTimeout(_0x142f10);_0x94338();};}),()=>_0x150cf4=!![]);_0x440ec9[_0x1747('0x85')]=_0x5c595f;return _0x440ec9;}function fires(_0xbe9021,_0x3cbe75,_0x125183){const _0x223dbc=timeoutPromise(_0x3cbe75,_0x125183);return Promise[_0x1747('0x86')]([onResolvedOrRejected(_0xbe9021,()=>_0x223dbc[_0x1747('0x85')]()),_0x223dbc]);}module[_0x1747('0x87')]={'NodeInstance':NodeInstance};