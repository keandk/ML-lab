var _0x3474=['doWrite','close','doClose','onreadstart','onshutdown','onwrite','pause','error','_readableState','objectMode','removeListener','data','emit','length','_handle','end','once','destroy','stream','readable','writable','read','StreamWrap','resume','doShutdown','finishShutdown','UV_','code','UV_EPIPE','finishWrite','UV_ECANCELED','exports','internal/assert','net','js_stream','internal/util/debuglog','debuglog','stream_socket','internal/async_hooks','internal/errors','codes','kCurrentWriteRequest','kPendingShutdownRequest','isClosing','readStart','readStop'];(function(_0x44b461,_0x3400d1){var _0x24dadd=function(_0x25efb6){while(--_0x25efb6){_0x44b461['push'](_0x44b461['shift']());}};_0x24dadd(++_0x3400d1);}(_0x3474,0x1ec));var _0x6d7c=function(_0x1d4fd7,_0x3efc1c){_0x1d4fd7=_0x1d4fd7-0x0;var _0x31da5b=_0x3474[_0x1d4fd7];return _0x31da5b;};'use strict';const assert=require(_0x6d7c('0x0'));const {Socket}=require(_0x6d7c('0x1'));const {JSStream}=internalBinding(_0x6d7c('0x2'));const uv=internalBinding('uv');const debug=require(_0x6d7c('0x3'))[_0x6d7c('0x4')](_0x6d7c('0x5'));const {owner_symbol}=require(_0x6d7c('0x6'))['symbols'];const {ERR_STREAM_WRAP}=require(_0x6d7c('0x7'))[_0x6d7c('0x8')];const kCurrentWriteRequest=Symbol(_0x6d7c('0x9'));const kCurrentShutdownRequest=Symbol('kCurrentShutdownRequest');const kPendingShutdownRequest=Symbol(_0x6d7c('0xa'));function isClosing(){return this[owner_symbol][_0x6d7c('0xb')]();}function onreadstart(){return this[owner_symbol][_0x6d7c('0xc')]();}function onreadstop(){return this[owner_symbol][_0x6d7c('0xd')]();}function onshutdown(_0x325f8c){return this[owner_symbol]['doShutdown'](_0x325f8c);}function onwrite(_0xdcb1b3,_0x3dbab2){return this[owner_symbol][_0x6d7c('0xe')](_0xdcb1b3,_0x3dbab2);}class JSStreamSocket extends Socket{constructor(_0x381caa){const _0x19c3a9=new JSStream();_0x19c3a9[_0x6d7c('0xf')]=_0xed803d=>{debug(_0x6d7c('0xf'));this[_0x6d7c('0x10')](_0xed803d);};_0x19c3a9[_0x6d7c('0xb')]=isClosing;_0x19c3a9[_0x6d7c('0x11')]=onreadstart;_0x19c3a9['onreadstop']=onreadstop;_0x19c3a9[_0x6d7c('0x12')]=onshutdown;_0x19c3a9[_0x6d7c('0x13')]=onwrite;_0x381caa[_0x6d7c('0x14')]();_0x381caa['on']('error',_0x39665f=>this['emit'](_0x6d7c('0x15'),_0x39665f));const _0x4eb8fc=_0x49f9d8=>{if(typeof _0x49f9d8==='string'||_0x381caa[_0x6d7c('0x16')][_0x6d7c('0x17')]===!![]){_0x381caa[_0x6d7c('0x14')]();_0x381caa[_0x6d7c('0x18')](_0x6d7c('0x19'),_0x4eb8fc);this[_0x6d7c('0x1a')](_0x6d7c('0x15'),new ERR_STREAM_WRAP());return;}debug(_0x6d7c('0x19'),_0x49f9d8[_0x6d7c('0x1b')]);if(this['_handle'])this[_0x6d7c('0x1c')]['readBuffer'](_0x49f9d8);};_0x381caa['on'](_0x6d7c('0x19'),_0x4eb8fc);_0x381caa['once'](_0x6d7c('0x1d'),()=>{debug(_0x6d7c('0x1d'));if(this[_0x6d7c('0x1c')])this[_0x6d7c('0x1c')]['emitEOF']();});_0x381caa[_0x6d7c('0x1e')]('close',()=>{this[_0x6d7c('0x1f')]();});super({'handle':_0x19c3a9,'manualStart':!![]});this[_0x6d7c('0x20')]=_0x381caa;this[kCurrentWriteRequest]=null;this[kCurrentShutdownRequest]=null;this[kPendingShutdownRequest]=null;this[_0x6d7c('0x21')]=_0x381caa[_0x6d7c('0x21')];this[_0x6d7c('0x22')]=_0x381caa[_0x6d7c('0x22')];this[_0x6d7c('0x23')](0x0);}static get[_0x6d7c('0x24')](){return JSStreamSocket;}['isClosing'](){return!this['readable']||!this[_0x6d7c('0x22')];}[_0x6d7c('0xc')](){this['stream'][_0x6d7c('0x25')]();return 0x0;}['readStop'](){this[_0x6d7c('0x20')][_0x6d7c('0x14')]();return 0x0;}[_0x6d7c('0x26')](_0x1b6dee){if(this[kCurrentWriteRequest]!==null){this[kPendingShutdownRequest]=_0x1b6dee;return 0x0;}assert(this[kCurrentWriteRequest]===null);assert(this[kCurrentShutdownRequest]===null);this[kCurrentShutdownRequest]=_0x1b6dee;const _0xf971dd=this[_0x6d7c('0x1c')];setImmediate(()=>{this['stream'][_0x6d7c('0x1d')](()=>{this['finishShutdown'](_0xf971dd,0x0);});});return 0x0;}[_0x6d7c('0x27')](_0x16e122,_0x2dd515){if(this[kCurrentShutdownRequest]===null)return;const _0x141737=this[kCurrentShutdownRequest];this[kCurrentShutdownRequest]=null;_0x16e122['finishShutdown'](_0x141737,_0x2dd515);}[_0x6d7c('0xe')](_0x124890,_0x4fbde7){assert(this[kCurrentWriteRequest]===null);assert(this[kCurrentShutdownRequest]===null);const _0x225b71=this[_0x6d7c('0x1c')];const _0x229a74=this;let _0x48447f=_0x4fbde7[_0x6d7c('0x1b')];this[_0x6d7c('0x20')]['cork']();for(var _0xda0b8e=0x0;_0xda0b8e<_0x4fbde7[_0x6d7c('0x1b')];++_0xda0b8e)this[_0x6d7c('0x20')]['write'](_0x4fbde7[_0xda0b8e],_0x278a9b);this[_0x6d7c('0x20')]['uncork']();this[kCurrentWriteRequest]=_0x124890;function _0x278a9b(_0x5cb31d){if(!_0x5cb31d&&--_0x48447f!==0x0)return;_0x48447f=0x0;let _0x5647e6=0x0;if(_0x5cb31d){_0x5647e6=uv[_0x6d7c('0x28')+_0x5cb31d[_0x6d7c('0x29')]]||uv[_0x6d7c('0x2a')];}setImmediate(()=>{_0x229a74[_0x6d7c('0x2b')](_0x225b71,_0x5647e6);});}return 0x0;}[_0x6d7c('0x2b')](_0x12b45b,_0x5cde46){if(this[kCurrentWriteRequest]===null)return;const _0xbc24ed=this[kCurrentWriteRequest];this[kCurrentWriteRequest]=null;_0x12b45b[_0x6d7c('0x2b')](_0xbc24ed,_0x5cde46);if(this[kPendingShutdownRequest]){const _0xbc24ed=this[kPendingShutdownRequest];this[kPendingShutdownRequest]=null;this[_0x6d7c('0x26')](_0xbc24ed);}}[_0x6d7c('0x10')](_0x5c7885){const _0x52bdb7=this[_0x6d7c('0x1c')];this[_0x6d7c('0x20')]['destroy']();setImmediate(()=>{assert(this[_0x6d7c('0x1c')]===null);this[_0x6d7c('0x2b')](_0x52bdb7,uv[_0x6d7c('0x2c')]);this[_0x6d7c('0x27')](_0x52bdb7,uv[_0x6d7c('0x2c')]);_0x5c7885();});}}module[_0x6d7c('0x2d')]=JSStreamSocket;